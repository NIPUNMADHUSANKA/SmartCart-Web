@if (showChangePassword) {
<!-- Change Password Modal -->
<div class="modal-backdrop"></div>

<div class="modal" role="dialog" aria-modal="true" aria-labelledby="cpTitle">
    <div class="modal-card" (click)="$event.stopPropagation()">
        <div class="modal-header">
            <h2 id="cpTitle">Change password</h2>
            <button class="icon-btn" type="button" aria-label="Close" (click)="toggleChangePasswordfun()">
                âœ•
            </button>
        </div>

        <form class="auth-form" [formGroup]="resetPassword">
            <div class="modal-body">
                <div class="field">
                    <label for="currentPassword">Current password</label>
                    <div class="input-row">
                        <input type="password" id="currentPassword" placeholder="Current password"
                            formControlName="currentPassword"
                            [class.invalid]="resetPassword.get('currentPassword')?.invalid && (resetPassword.get('currentPassword')?.touched || resetPassword.get('currentPassword')?.dirty || isSubmitted)" />

                    </div>
                    @if (resetPassword.get('currentPassword')?.touched ||
                    resetPassword.get('currentPassword')?.dirty || isSubmitted) {

                    @if (resetPassword.get('currentPassword')?.hasError('required')) {
                    <small class="error">Current Password is required.</small>
                    }
                    @else if (resetPassword.get('currentPassword')?.hasError('minlength')) {
                    <small class="error">Your password must be at least 6 characters long.</small>
                    }

                    }
                </div>

                <div class="field">
                    <label for="newPassword">New password</label>
                    <div class="input-row">
                        <input type="password" id="newPassword" placeholder="New password" formControlName="newPassword"
                            [class.invalid]="resetPassword.get('newPassword')?.invalid && (resetPassword.get('newPassword')?.touched || resetPassword.get('newPassword')?.dirty || isSubmitted)" />

                    </div>

                    @if (resetPassword.get('newPassword')?.touched ||
                    resetPassword.get('newPassword')?.dirty || isSubmitted) {

                    @if (resetPassword.get('newPassword')?.hasError('required')) {
                    <small class="error">New Password is required.</small>
                    }
                    @else if (resetPassword.get('newPassword')?.hasError('minlength')) {
                    <small class="error">Your password must be at least 6 characters long.</small>
                    }

                    }

                </div>

                <div class="field">
                    <label for="confirmPassword">Confirm new password</label>
                    <div class="input-row">
                        <input type="password" id="confirmPassword" placeholder="New password"
                            formControlName="confirmPassword"
                            [class.invalid]="resetPassword.get('confirmPassword')?.invalid && (resetPassword.get('confirmPassword')?.touched || resetPassword.get('confirmPassword')?.dirty || isSubmitted)" />

                    </div>
                    @if (resetPassword.get('confirmPassword')?.touched
                    || resetPassword.get('confirmPassword')?.dirty
                    || isSubmitted) {

                    @if (resetPassword.get('confirmPassword')?.hasError('required')) {
                    <small class="error">Confirm Password is required.</small>
                    }

                    @else if (resetPassword.get('confirmPassword')?.hasError('mismatch')) {
                    <small class="error">Passwords do not match.</small>
                    }
                    }
                </div>
            </div>

            <div class="modal-actions">
                <button type="button" class="btn ghost" (click)="toggleChangePasswordfun()">Cancel</button>
                <button type="submit" class="btn primary" (click)="updatePassword()">Update password
                </button>
            </div>
        </form>
    </div>
</div>
}